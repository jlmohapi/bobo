{"ast":null,"code":"import React,{useState}from'react';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){let{setUser}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[message,setMessage]=useState('');async function submit(e){e.preventDefault();const res=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});const data=await res.json();if(res.ok){localStorage.setItem('token',data.token);setUser(JSON.parse(atob(data.token.split('.')[1])));setMessage('Logged in as '+data.role);}else setMessage('Invalid login');}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mb-2\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-2\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-success\",children:message}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]})]});}","map":{"version":3,"names":["React","useState","Link","jsx","_jsx","jsxs","_jsxs","Login","_ref","setUser","username","setUsername","password","setPassword","message","setMessage","submit","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","parse","atob","split","role","onSubmit","className","children","placeholder","value","onChange","target","required","type","to"],"sources":["C:/Users/limph/OneDrive/Desktop/luct-reporting-full/frontend/src/components/Login.js"],"sourcesContent":["import React,{useState} from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default function Login({ setUser }){\n const [username,setUsername]=useState('');\n const [password,setPassword]=useState('');\n const [message,setMessage]=useState('');\n async function submit(e){\n  e.preventDefault();\n  const res=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});\n  const data=await res.json();\n  if(res.ok){\n    localStorage.setItem('token',data.token);\n    setUser(JSON.parse(atob(data.token.split('.')[1])));\n    setMessage('Logged in as '+data.role);\n  } else setMessage('Invalid login');\n }\n return(\n  <form onSubmit={submit} className=\"card p-3\">\n    <h5>Login</h5>\n    <input className=\"form-control mb-2\" placeholder=\"Username\" value={username} onChange={e=>setUsername(e.target.value)} required/>\n    <input type=\"password\" className=\"form-control mb-2\" placeholder=\"Password\" value={password} onChange={e=>setPassword(e.target.value)} required/>\n    <button className=\"btn btn-primary mb-2\">Login</button>\n    <div className=\"text-success\">{message}</div>\n    <p>Don't have an account? <Link to=\"/register\">Register here</Link></p>\n  </form>\n );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAEC,QAAQ,KAAO,OAAO,CACpC,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,cAAe,SAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACxC,KAAM,CAACE,QAAQ,CAACC,WAAW,CAAC,CAACV,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAACW,QAAQ,CAACC,WAAW,CAAC,CAACZ,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAACa,OAAO,CAACC,UAAU,CAAC,CAACd,QAAQ,CAAC,EAAE,CAAC,CACvC,cAAe,CAAAe,MAAMA,CAACC,CAAC,CAAC,CACvBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,GAAG,CAAC,KAAM,CAAAC,KAAK,CAAC,YAAY,CAAC,CAACC,MAAM,CAAC,MAAM,CAACC,OAAO,CAAC,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAACC,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CAACf,QAAQ,CAACE,QAAQ,CAAC,CAAC,CAAC,CAAC,CACxI,KAAM,CAAAc,IAAI,CAAC,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC3B,GAAGR,GAAG,CAACS,EAAE,CAAC,CACRC,YAAY,CAACC,OAAO,CAAC,OAAO,CAACJ,IAAI,CAACK,KAAK,CAAC,CACxCtB,OAAO,CAACe,IAAI,CAACQ,KAAK,CAACC,IAAI,CAACP,IAAI,CAACK,KAAK,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACnDnB,UAAU,CAAC,eAAe,CAACW,IAAI,CAACS,IAAI,CAAC,CACvC,CAAC,IAAM,CAAApB,UAAU,CAAC,eAAe,CAAC,CACnC,CACA,mBACCT,KAAA,SAAM8B,QAAQ,CAAEpB,MAAO,CAACqB,SAAS,CAAC,UAAU,CAAAC,QAAA,eAC1ClC,IAAA,OAAAkC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdlC,IAAA,UAAOiC,SAAS,CAAC,mBAAmB,CAACE,WAAW,CAAC,UAAU,CAACC,KAAK,CAAE9B,QAAS,CAAC+B,QAAQ,CAAExB,CAAC,EAAEN,WAAW,CAACM,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAAC,CAAC,cACjIvC,IAAA,UAAOwC,IAAI,CAAC,UAAU,CAACP,SAAS,CAAC,mBAAmB,CAACE,WAAW,CAAC,UAAU,CAACC,KAAK,CAAE5B,QAAS,CAAC6B,QAAQ,CAAExB,CAAC,EAAEJ,WAAW,CAACI,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAAC,CAAC,cACjJvC,IAAA,WAAQiC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,OAAK,CAAQ,CAAC,cACvDlC,IAAA,QAAKiC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAExB,OAAO,CAAM,CAAC,cAC7CR,KAAA,MAAAgC,QAAA,EAAG,yBAAuB,cAAAlC,IAAA,CAACF,IAAI,EAAC2C,EAAE,CAAC,WAAW,CAAAP,QAAA,CAAC,eAAa,CAAM,CAAC,EAAG,CAAC,EACnE,CAAC,CAET","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}