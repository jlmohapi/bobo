{"ast":null,"code":"import _objectSpread from\"C:/Users/limph/OneDrive/Desktop/luct-reporting-full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ClassesList(){const[classes,setClasses]=useState([]);const[q,setQ]=useState('');const[showAdd,setShowAdd]=useState(false);const[form,setForm]=useState({course_id:'',name:'',venue:'',scheduled_time:'',total_registered:0});const[courses,setCourses]=useState([]);useEffect(()=>{loadData();},[]);async function loadData(){const token=localStorage.getItem('token');const config={headers:{'Authorization':'Bearer '+token}};const[cRes,coRes]=await Promise.all([fetch('/api/classes?q='+encodeURIComponent(q),config),fetch('/api/courses',config)]);if(cRes.ok)setClasses(await cRes.json());if(coRes.ok)setCourses(await coRes.json());}function search(e){e.preventDefault();loadData();}async function addClass(e){e.preventDefault();const token=localStorage.getItem('token');const res=await fetch('/api/classes',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify(form)});if(res.ok){setForm({course_id:'',name:'',venue:'',scheduled_time:'',total_registered:0});setShowAdd(false);loadData();}else alert('Error adding class');}return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Classes\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:search,className:\"mb-2 d-flex\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",value:q,onChange:e=>setQ(e.target.value),placeholder:\"Search classes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-2\",onClick:()=>setShowAdd(!showAdd),children:\"Add Class\"}),showAdd&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:addClass,className:\"mb-3 border p-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-control mb-2\",value:form.course_id,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{course_id:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Course\"}),courses.map(c=>/*#__PURE__*/_jsxs(\"option\",{value:c.id,children:[c.name,\" (\",c.code,\")\"]},c.id))]}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Class Name\",value:form.name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Venue\",value:form.venue,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{venue:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Scheduled Time\",value:form.scheduled_time,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{scheduled_time:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",type:\"number\",placeholder:\"Total Registered\",value:form.total_registered,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{total_registered:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary ms-2\",onClick:()=>setShowAdd(false),children:\"Cancel\"})]}),classes.map(c=>/*#__PURE__*/_jsxs(\"div\",{className:\"border p-2 mb-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:c.name}),\" - \",c.course_name,\" | Venue: \",c.venue,\" | Time: \",c.scheduled_time,\" | Registered: \",c.total_registered]},c.id))]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ClassesList","classes","setClasses","q","setQ","showAdd","setShowAdd","form","setForm","course_id","name","venue","scheduled_time","total_registered","courses","setCourses","loadData","token","localStorage","getItem","config","headers","cRes","coRes","Promise","all","fetch","encodeURIComponent","ok","json","search","e","preventDefault","addClass","res","method","body","JSON","stringify","alert","className","children","onSubmit","value","onChange","target","placeholder","onClick","_objectSpread","required","map","c","id","code","type","course_name"],"sources":["C:/Users/limph/OneDrive/Desktop/luct-reporting-full/frontend/src/components/ClassesList.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\n\r\nexport default function ClassesList(){\r\n const [classes,setClasses]=useState([]);\r\n const [q,setQ]=useState('');\r\n const [showAdd,setShowAdd]=useState(false);\r\n const [form,setForm]=useState({course_id:'',name:'',venue:'',scheduled_time:'',total_registered:0});\r\n const [courses,setCourses]=useState([]);\r\n\r\n useEffect(()=>{\r\n  loadData();\r\n },[]);\r\n\r\n async function loadData(){\r\n  const token=localStorage.getItem('token');\r\n  const config={headers:{'Authorization':'Bearer '+token}};\r\n  const [cRes,coRes]=await Promise.all([\r\n    fetch('/api/classes?q='+encodeURIComponent(q),config),\r\n    fetch('/api/courses',config)\r\n  ]);\r\n  if(cRes.ok) setClasses(await cRes.json());\r\n  if(coRes.ok) setCourses(await coRes.json());\r\n }\r\n\r\n function search(e){e.preventDefault();loadData();}\r\n\r\n async function addClass(e){\r\n  e.preventDefault();\r\n  const token=localStorage.getItem('token');\r\n  const res=await fetch('/api/classes',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify(form)});\r\n  if(res.ok){\r\n    setForm({course_id:'',name:'',venue:'',scheduled_time:'',total_registered:0});\r\n    setShowAdd(false);\r\n    loadData();\r\n  }else alert('Error adding class');\r\n }\r\n\r\n return(\r\n  <div className=\"card p-3\">\r\n    <h5>Classes</h5>\r\n    <form onSubmit={search} className=\"mb-2 d-flex\">\r\n      <input className=\"form-control me-2\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Search classes\"/>\r\n      <button className=\"btn btn-secondary\">Search</button>\r\n    </form>\r\n    <button className=\"btn btn-primary mb-2\" onClick={()=>setShowAdd(!showAdd)}>Add Class</button>\r\n    {showAdd && (\r\n      <form onSubmit={addClass} className=\"mb-3 border p-2\">\r\n        <select className=\"form-control mb-2\" value={form.course_id} onChange={e=>setForm({...form,course_id:e.target.value})} required>\r\n          <option value=\"\">Select Course</option>\r\n          {courses.map(c=><option key={c.id} value={c.id}>{c.name} ({c.code})</option>)}\r\n        </select>\r\n        <input className=\"form-control mb-2\" placeholder=\"Class Name\" value={form.name} onChange={e=>setForm({...form,name:e.target.value})} required/>\r\n        <input className=\"form-control mb-2\" placeholder=\"Venue\" value={form.venue} onChange={e=>setForm({...form,venue:e.target.value})}/>\r\n        <input className=\"form-control mb-2\" placeholder=\"Scheduled Time\" value={form.scheduled_time} onChange={e=>setForm({...form,scheduled_time:e.target.value})}/>\r\n        <input className=\"form-control mb-2\" type=\"number\" placeholder=\"Total Registered\" value={form.total_registered} onChange={e=>setForm({...form,total_registered:e.target.value})}/>\r\n        <button className=\"btn btn-success\">Add</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={()=>setShowAdd(false)}>Cancel</button>\r\n      </form>\r\n    )}\r\n    {classes.map(c=><div key={c.id} className=\"border p-2 mb-2\"><b>{c.name}</b> - {c.course_name} | Venue: {c.venue} | Time: {c.scheduled_time} | Registered: {c.total_registered}</div>)}\r\n  </div>\r\n );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}