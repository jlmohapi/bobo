{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter,Routes,Route,Link,Navigate}from'react-router-dom';import'./styles.css';import Login from'./components/Login';import LecturerForm from'./components/LecturerForm';import ReportsList from'./components/ReportsList';import Register from'./components/Register';import Dashboard from'./components/Dashboard';import CoursesList from'./components/CoursesList';import ClassesList from'./components/ClassesList';import Monitoring from'./components/Monitoring';import Rating from'./components/Rating';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function ProtectedRoute(_ref){let{children,role}=_ref;const token=localStorage.getItem('token');if(!token)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});const user=JSON.parse(atob(token.split('.')[1]));if(role&&user.role!==role)return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"});return children;}function App(){const[user,setUser]=useState(null);useEffect(()=>{const token=localStorage.getItem('token');if(token){try{const decoded=JSON.parse(atob(token.split('.')[1]));setUser(decoded);}catch(e){localStorage.removeItem('token');}}},[]);const logout=()=>{localStorage.removeItem('token');setUser(null);};return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container py-3\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"LUCT Faculty Reporting\"}),/*#__PURE__*/_jsx(\"nav\",{className:\"mb-3\",children:!user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"me-2\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"me-2\",children:\"Dashboard\"}),user.role==='lecturer'&&/*#__PURE__*/_jsx(Link,{to:\"/lecturer\",className:\"me-2\",children:\"Submit Report\"}),/*#__PURE__*/_jsx(Link,{to:\"/reports\",className:\"me-2\",children:\"Reports\"}),(user.role==='pl'||user.role==='prl')&&/*#__PURE__*/_jsx(Link,{to:\"/courses\",className:\"me-2\",children:\"Courses\"}),user.role==='pl'&&/*#__PURE__*/_jsx(Link,{to:\"/classes\",className:\"me-2\",children:\"Classes\"}),/*#__PURE__*/_jsx(Link,{to:\"/monitoring\",className:\"me-2\",children:\"Monitoring\"}),/*#__PURE__*/_jsx(Link,{to:\"/rating\",className:\"me-2\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"btn btn-link\",children:\"Logout\"})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?\"/dashboard\":\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Dashboard,{user:user})})}),/*#__PURE__*/_jsx(Route,{path:\"/lecturer\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"lecturer\",children:/*#__PURE__*/_jsx(LecturerForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ReportsList,{user:user})})}),/*#__PURE__*/_jsx(Route,{path:\"/courses\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"pl\",children:/*#__PURE__*/_jsx(CoursesList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/classes\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"pl\",children:/*#__PURE__*/_jsx(ClassesList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/monitoring\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Monitoring,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/rating\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Rating,{user:user})})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Link","Navigate","Login","LecturerForm","ReportsList","Register","Dashboard","CoursesList","ClassesList","Monitoring","Rating","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProtectedRoute","_ref","children","role","token","localStorage","getItem","to","user","JSON","parse","atob","split","App","setUser","decoded","e","removeItem","logout","className","onClick","path","element"],"sources":["C:/Users/limph/OneDrive/Desktop/luct-reporting-full/frontend/src/App.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\nimport {BrowserRouter,Routes,Route,Link,Navigate} from 'react-router-dom';\nimport './styles.css';\nimport Login from './components/Login';\nimport LecturerForm from './components/LecturerForm';\nimport ReportsList from './components/ReportsList';\nimport Register from './components/Register';\nimport Dashboard from './components/Dashboard';\nimport CoursesList from './components/CoursesList';\nimport ClassesList from './components/ClassesList';\nimport Monitoring from './components/Monitoring';\nimport Rating from './components/Rating';\n\nfunction ProtectedRoute({children, role}){\n  const token=localStorage.getItem('token');\n  if(!token) return <Navigate to=\"/login\"/>;\n  const user=JSON.parse(atob(token.split('.')[1]));\n  if(role && user.role !== role) return <Navigate to=\"/dashboard\"/>;\n  return children;\n}\n\nfunction App(){\n  const [user,setUser]=useState(null);\n  useEffect(()=>{\n    const token=localStorage.getItem('token');\n    if(token){\n      try{\n        const decoded=JSON.parse(atob(token.split('.')[1]));\n        setUser(decoded);\n      }catch(e){localStorage.removeItem('token');}\n    }\n  },[]);\n\n  const logout=()=>{\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n\n  return(\n    <BrowserRouter>\n    <div className=\"container py-3\">\n      <h1>LUCT Faculty Reporting</h1>\n      <nav className=\"mb-3\">\n        {!user ? (\n          <>\n            <Link to=\"/login\" className=\"me-2\">Login</Link>\n            <Link to=\"/register\">Register</Link>\n          </>\n        ) : (\n          <>\n            <Link to=\"/dashboard\" className=\"me-2\">Dashboard</Link>\n            {user.role==='lecturer' && <Link to=\"/lecturer\" className=\"me-2\">Submit Report</Link>}\n            <Link to=\"/reports\" className=\"me-2\">Reports</Link>\n            {(user.role==='pl' || user.role==='prl') && <Link to=\"/courses\" className=\"me-2\">Courses</Link>}\n            {user.role==='pl' && <Link to=\"/classes\" className=\"me-2\">Classes</Link>}\n            <Link to=\"/monitoring\" className=\"me-2\">Monitoring</Link>\n            <Link to=\"/rating\" className=\"me-2\">Rating</Link>\n            <button onClick={logout} className=\"btn btn-link\">Logout</button>\n          </>\n        )}\n      </nav>\n      <Routes>\n        <Route path=\"/\" element={<Navigate to={user ? \"/dashboard\" : \"/login\"}/>}/>\n        <Route path=\"/login\" element={<Login setUser={setUser}/>}/>\n        <Route path=\"/register\" element={<Register/>}/>\n        <Route path=\"/dashboard\" element={<ProtectedRoute><Dashboard user={user}/></ProtectedRoute>}/>\n        <Route path=\"/lecturer\" element={<ProtectedRoute role=\"lecturer\"><LecturerForm/></ProtectedRoute>}/>\n        <Route path=\"/reports\" element={<ProtectedRoute><ReportsList user={user}/></ProtectedRoute>}/>\n        <Route path=\"/courses\" element={<ProtectedRoute role=\"pl\"><CoursesList/></ProtectedRoute>}/>\n        <Route path=\"/classes\" element={<ProtectedRoute role=\"pl\"><ClassesList/></ProtectedRoute>}/>\n        <Route path=\"/monitoring\" element={<ProtectedRoute><Monitoring/></ProtectedRoute>}/>\n        <Route path=\"/rating\" element={<ProtectedRoute><Rating user={user}/></ProtectedRoute>}/>\n      </Routes>\n    </div>\n    </BrowserRouter>\n  );\n}\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}