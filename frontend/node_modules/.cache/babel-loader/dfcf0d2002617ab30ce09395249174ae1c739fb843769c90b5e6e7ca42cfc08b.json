{"ast":null,"code":"import _objectSpread from\"C:/Users/limph/OneDrive/Desktop/luct-reporting-full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CoursesList(){const[courses,setCourses]=useState([]);const[q,setQ]=useState('');const[showAdd,setShowAdd]=useState(false);const[form,setForm]=useState({faculty_id:'',name:'',code:'',stream:''});const[faculties,setFaculties]=useState([]);useEffect(()=>{loadData();},[]);async function loadData(){const token=localStorage.getItem('token');const config={headers:{'Authorization':'Bearer '+token}};const[cRes,fRes]=await Promise.all([fetch('/api/courses?q='+encodeURIComponent(q),config),fetch('/api/faculties',config)]);if(cRes.ok)setCourses(await cRes.json());if(fRes.ok)setFaculties(await fRes.json());}function search(e){e.preventDefault();loadData();}async function addCourse(e){e.preventDefault();const token=localStorage.getItem('token');const res=await fetch('/api/courses',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify(form)});if(res.ok){setForm({faculty_id:'',name:'',code:'',stream:''});setShowAdd(false);loadData();}else alert('Error adding course');}return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Courses\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:search,className:\"mb-2 d-flex\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",value:q,onChange:e=>setQ(e.target.value),placeholder:\"Search courses\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-2\",onClick:()=>setShowAdd(!showAdd),children:\"Add Course\"}),showAdd&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:addCourse,className:\"mb-3 border p-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-control mb-2\",value:form.faculty_id,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{faculty_id:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Faculty\"}),faculties.map(f=>/*#__PURE__*/_jsx(\"option\",{value:f.id,children:f.name},f.id))]}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Course Name\",value:form.name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Course Code\",value:form.code,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{code:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2\",placeholder:\"Stream\",value:form.stream,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{stream:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary ms-2\",onClick:()=>setShowAdd(false),children:\"Cancel\"})]}),courses.map(c=>/*#__PURE__*/_jsxs(\"div\",{className:\"border p-2 mb-2\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[c.name,\" (\",c.code,\")\"]}),\" - \",c.faculty_name,\" | Stream: \",c.stream]},c.id))]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","CoursesList","courses","setCourses","q","setQ","showAdd","setShowAdd","form","setForm","faculty_id","name","code","stream","faculties","setFaculties","loadData","token","localStorage","getItem","config","headers","cRes","fRes","Promise","all","fetch","encodeURIComponent","ok","json","search","e","preventDefault","addCourse","res","method","body","JSON","stringify","alert","className","children","onSubmit","value","onChange","target","placeholder","onClick","_objectSpread","required","map","f","id","type","c","faculty_name"],"sources":["C:/Users/limph/OneDrive/Desktop/luct-reporting-full/frontend/src/components/CoursesList.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\n\r\nexport default function CoursesList(){\r\n const [courses,setCourses]=useState([]);\r\n const [q,setQ]=useState('');\r\n const [showAdd,setShowAdd]=useState(false);\r\n const [form,setForm]=useState({faculty_id:'',name:'',code:'',stream:''});\r\n const [faculties,setFaculties]=useState([]);\r\n\r\n useEffect(()=>{\r\n  loadData();\r\n },[]);\r\n\r\n async function loadData(){\r\n  const token=localStorage.getItem('token');\r\n  const config={headers:{'Authorization':'Bearer '+token}};\r\n  const [cRes,fRes]=await Promise.all([\r\n    fetch('/api/courses?q='+encodeURIComponent(q),config),\r\n    fetch('/api/faculties',config)\r\n  ]);\r\n  if(cRes.ok) setCourses(await cRes.json());\r\n  if(fRes.ok) setFaculties(await fRes.json());\r\n }\r\n\r\n function search(e){e.preventDefault();loadData();}\r\n\r\n async function addCourse(e){\r\n  e.preventDefault();\r\n  const token=localStorage.getItem('token');\r\n  const res=await fetch('/api/courses',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify(form)});\r\n  if(res.ok){\r\n    setForm({faculty_id:'',name:'',code:'',stream:''});\r\n    setShowAdd(false);\r\n    loadData();\r\n  }else alert('Error adding course');\r\n }\r\n\r\n return(\r\n  <div className=\"card p-3\">\r\n    <h5>Courses</h5>\r\n    <form onSubmit={search} className=\"mb-2 d-flex\">\r\n      <input className=\"form-control me-2\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Search courses\"/>\r\n      <button className=\"btn btn-secondary\">Search</button>\r\n    </form>\r\n    <button className=\"btn btn-primary mb-2\" onClick={()=>setShowAdd(!showAdd)}>Add Course</button>\r\n    {showAdd && (\r\n      <form onSubmit={addCourse} className=\"mb-3 border p-2\">\r\n        <select className=\"form-control mb-2\" value={form.faculty_id} onChange={e=>setForm({...form,faculty_id:e.target.value})} required>\r\n          <option value=\"\">Select Faculty</option>\r\n          {faculties.map(f=><option key={f.id} value={f.id}>{f.name}</option>)}\r\n        </select>\r\n        <input className=\"form-control mb-2\" placeholder=\"Course Name\" value={form.name} onChange={e=>setForm({...form,name:e.target.value})} required/>\r\n        <input className=\"form-control mb-2\" placeholder=\"Course Code\" value={form.code} onChange={e=>setForm({...form,code:e.target.value})} required/>\r\n        <input className=\"form-control mb-2\" placeholder=\"Stream\" value={form.stream} onChange={e=>setForm({...form,stream:e.target.value})}/>\r\n        <button className=\"btn btn-success\">Add</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={()=>setShowAdd(false)}>Cancel</button>\r\n      </form>\r\n    )}\r\n    {courses.map(c=><div key={c.id} className=\"border p-2 mb-2\"><b>{c.name} ({c.code})</b> - {c.faculty_name} | Stream: {c.stream}</div>)}\r\n  </div>\r\n );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}