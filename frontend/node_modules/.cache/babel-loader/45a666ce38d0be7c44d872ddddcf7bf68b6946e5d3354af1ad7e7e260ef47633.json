{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MT SOLUTIONS\\\\3D Objects\\\\luct-reporting-full\\\\frontend\\\\src\\\\components\\\\ReportsList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ReportsList({\n  user\n}) {\n  _s();\n  const [reports, setReports] = useState([]);\n  const [q, setQ] = useState('');\n  const [feedbacks, setFeedbacks] = useState({});\n  async function load() {\n    const token = localStorage.getItem('token');\n    const res = await fetch('/api/reports?q=' + encodeURIComponent(q), {\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    });\n    if (res.ok) {\n      setReports(await res.json());\n    }\n  }\n  useEffect(() => {\n    load();\n  }, []);\n  function search(e) {\n    e.preventDefault();\n    load();\n  }\n  function exportCSV() {\n    window.open('/api/reports/export?q=' + encodeURIComponent(q));\n  }\n  function exportExcel() {\n    window.open('/api/reports/export?format=excel&q=' + encodeURIComponent(q));\n  }\n  async function submitFeedback(id) {\n    const token = localStorage.getItem('token');\n    const res = await fetch(`/api/reports/${id}/feedback`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        feedback: feedbacks[id]\n      })\n    });\n    if (res.ok) {\n      alert('Feedback submitted');\n      load();\n    } else alert('Error');\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: search,\n      className: \"mb-2 d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control me-2\",\n        value: q,\n        onChange: e => setQ(e.target.value),\n        placeholder: \"Search courses, lecturers, topics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-outline-success me-2\",\n        onClick: exportCSV,\n        children: \"Download CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-outline-success\",\n        onClick: exportExcel,\n        children: \"Download Excel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }, this), reports.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border p-2 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: [r.course_name, \" (\", r.course_code, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), \" - \", r.topic_taught, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 68\n      }, this), \"Lecturer: \", r.lecturer_name, \" | Class: \", r.class_name, \" | Date: \", r.lecture_date, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 85\n      }, this), \"Week: \", r.week_of_reporting, \" | Present: \", r.actual_students_present, \"/\", r.total_registered, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 96\n      }, this), \"Outcomes: \", r.learning_outcomes, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 40\n      }, this), \"Recommendations: \", r.recommendations, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 45\n      }, this), r.feedback && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Feedback:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 29\n        }, this), \" \", r.feedback]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 24\n      }, this), user && user.role === 'prl' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"form-control mb-1\",\n          placeholder: \"Add feedback\",\n          value: feedbacks[r.id] || '',\n          onChange: e => setFeedbacks({\n            ...feedbacks,\n            [r.id]: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-primary\",\n          onClick: () => submitFeedback(r.id),\n          children: \"Submit Feedback\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this)]\n    }, r.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 3\n  }, this);\n}\n_s(ReportsList, \"5gVTA/I52q6qHvr8Y/FETaDgDdQ=\");\n_c = ReportsList;\nvar _c;\n$RefreshReg$(_c, \"ReportsList\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ReportsList","user","_s","reports","setReports","q","setQ","feedbacks","setFeedbacks","load","token","localStorage","getItem","res","fetch","encodeURIComponent","headers","ok","json","search","e","preventDefault","exportCSV","window","open","exportExcel","submitFeedback","id","method","body","JSON","stringify","feedback","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","placeholder","onClick","map","r","course_name","course_code","topic_taught","lecturer_name","class_name","lecture_date","week_of_reporting","actual_students_present","total_registered","learning_outcomes","recommendations","role","_c","$RefreshReg$"],"sources":["C:/Users/MT SOLUTIONS/3D Objects/luct-reporting-full/frontend/src/components/ReportsList.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\nexport default function ReportsList({user}){\n const [reports,setReports]=useState([]);\n const [q,setQ]=useState('');\n const [feedbacks,setFeedbacks]=useState({});\n\n async function load(){\n  const token=localStorage.getItem('token');\n  const res=await fetch('/api/reports?q='+encodeURIComponent(q),{headers:{'Authorization':'Bearer '+token}});\n  if(res.ok){setReports(await res.json());}\n }\n useEffect(()=>{load();},[]);\n function search(e){e.preventDefault();load();}\n function exportCSV(){window.open('/api/reports/export?q='+encodeURIComponent(q));}\n function exportExcel(){window.open('/api/reports/export?format=excel&q='+encodeURIComponent(q));}\n\n async function submitFeedback(id){\n  const token=localStorage.getItem('token');\n  const res=await fetch(`/api/reports/${id}/feedback`,{method:'PUT',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify({feedback:feedbacks[id]})});\n  if(res.ok){alert('Feedback submitted');load();}else alert('Error');\n }\n\n return(\n  <div className=\"card p-3\">\n    <h5>Reports</h5>\n    <form onSubmit={search} className=\"mb-2 d-flex\">\n      <input className=\"form-control me-2\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Search courses, lecturers, topics\"/>\n      <button className=\"btn btn-secondary\">Search</button>\n    </form>\n    <div className=\"mb-2\">\n      <button className=\"btn btn-outline-success me-2\" onClick={exportCSV}>Download CSV</button>\n      <button className=\"btn btn-outline-success\" onClick={exportExcel}>Download Excel</button>\n    </div>\n    {reports.map(r=>\n      <div key={r.id} className=\"border p-2 mb-2\">\n        <b>{r.course_name} ({r.course_code})</b> - {r.topic_taught}<br/>\n        Lecturer: {r.lecturer_name} | Class: {r.class_name} | Date: {r.lecture_date}<br/>\n        Week: {r.week_of_reporting} | Present: {r.actual_students_present}/{r.total_registered}<br/>\n        Outcomes: {r.learning_outcomes}<br/>\n        Recommendations: {r.recommendations}<br/>\n        {r.feedback && <div><b>Feedback:</b> {r.feedback}</div>}\n        {user && user.role==='prl' && (\n          <div className=\"mt-2\">\n            <textarea className=\"form-control mb-1\" placeholder=\"Add feedback\" value={feedbacks[r.id]||''} onChange={e=>setFeedbacks({...feedbacks,[r.id]:e.target.value})}/>\n            <button className=\"btn btn-sm btn-primary\" onClick={()=>submitFeedback(r.id)}>Submit Feedback</button>\n          </div>\n        )}\n      </div>\n    )}\n  </div>\n );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}